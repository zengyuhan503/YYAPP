"use strict";const e=require("../common/vendor.js"),t=require("../utils/api/index.js");if(!Array){e.resolveComponent("uni-icons")()}Math;const i={__name:"DateElement",props:{type:String},emits:"handleClosePopup",setup(i,{expose:s,emit:n}){let o=i;const a=["天","一","二","三","四","五","六"],l=e.ref([]),r=e.ref([]);let d=e.ref([{start_time:"06:00",end_time:"07:00",is_limit:0,index:"1",show:!1},{start_time:"07:00",end_time:"08:00",is_limit:0,index:"2",show:!1},{start_time:"08:00",end_time:"09:00",is_limit:0,index:"3",show:!1},{start_time:"09:00",end_time:"10:00",is_limit:0,index:"4",show:!1},{start_time:"10:00",end_time:"11:00",is_limit:0,index:"5",show:!1},{start_time:"11:00",end_time:"12:00",is_limit:0,index:"6",show:!1},{start_time:"12:00",end_time:"13:00",is_limit:0,index:"7",show:!1},{start_time:"13:00",end_time:"14:00",is_limit:0,index:"8",show:!1},{start_time:"14:00",end_time:"15:00",is_limit:0,index:"9",show:!1},{start_time:"15:00",end_time:"16:00",is_limit:0,index:"10",show:!1},{start_time:"16:00",end_time:"17:00",is_limit:0,index:"11",show:!1},{start_time:"17:00",end_time:"18:00",is_limit:0,index:"12",show:!1},{start_time:"18:00",end_time:"19:00",is_limit:0,index:"13",show:!1},{start_time:"19:00",end_time:"20:00",is_limit:0,index:"14",show:!1}]),m=e.ref([]),u=n;const _=()=>{u("handleClosePopup")};let f=e.ref(0),h=e.ref(""),v=e.ref(null),x=e.ref(0);const c=e=>{x.value=e.index,v.value=e,console.log(v.value)},p=()=>{let e=m.value.some((e=>parseInt(e.index)>7));return console.log(e),e},w=(i=null)=>{m.value=[],h.value=e.hooks().format("YYYY-MM-DD"),f.value=e.hooks().startOf("days").valueOf(),null!=i&&(h.value=e.hooks(i.time).format("YYYY-MM-DD"),f.value=i.time);let s={date:h.value,type:o.type};t.booking_plans_detail(s).then((t=>{if(0==t.length)return!1;let i=t.index.split(",");m.value=d.value.filter((e=>i.includes(e.index)));const s=e.hooks(),n=m.value.filter((t=>{const i=e.hooks(t.end_time,"HH:mm");return s.isBefore(i)}));console.log(n),m.value=n}))},y=()=>{if(0==x.value)return e.index.showToast({title:"请选择时间段，获取取消选择",icon:"none",duration:2e3}),!1;u("handleSelectTimes",v.value,f.value)};return s([v]),e.onMounted((()=>{(()=>{const t=new Date,i=t.getDay();for(let s=0;s<7;s++){const i=e.hooks(t).add(s,"days").startOf("days").format("DD"),n=e.hooks(t).add(s,"days").startOf("days").valueOf();l.value.push({day:i,time:n})}for(let e=i,s=0;s<7;e=(e+1)%7,s++)r.value.push(a[e]);f.value=e.hooks().startOf("days").valueOf()})(),w(),console.log(o)})),(t,i)=>e.e({a:e.p({type:"closeempty",size:"30"}),b:e.o(_),c:e.f(r.value,((t,i,s)=>({a:e.t(t),b:t}))),d:e.f(l.value,((t,i,s)=>({a:e.t(0==i?"今":t.day),b:t.time==e.unref(f)?1:"",c:i,d:e.o((e=>w(t)),i)}))),e:e.t(e.unref(e.hooks)(e.unref(h)).format("MM月DD日")),f:0!=e.unref(m).length},0!=e.unref(m).length?{g:m.value.some((e=>parseInt(e.index)<7)),h:e.f(e.unref(m),((t,i=0,s)=>({a:e.t(t.start_time),b:e.t(t.end_time),c:e.o((e=>c(t)),i),d:parseInt(t.index)<7,e:i,f:e.unref(x)==t.index?1:""}))),i:p(),j:e.f(e.unref(m),((t,i=0,s)=>({a:e.t(t.start_time),b:e.t(t.end_time),c:e.o((e=>c(t)),i),d:parseInt(t.index)>7,e:i,f:e.unref(x)==t.index?1:""})))}:{},{k:e.o(y)})}},s=e._export_sfc(i,[["__scopeId","data-v-23a50224"]]);wx.createComponent(s);
