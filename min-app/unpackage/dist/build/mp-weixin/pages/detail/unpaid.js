"use strict";const e=require("../../common/vendor.js"),t=require("../../utils/api/index.js");if(!Array){e.resolveComponent("uni-popup")()}Math;const s={__name:"unpaid",setup(s){let n=e.ref({0:"待付款",1:"待发货",2:"待收货",3:"已收货",4:"完成订单","-1":"已关闭","-2":"已取消","-3":"已取消",all:"全部订单"}),u=e.ref(null),r=null,o=e.ref({}),a=e.ref(!1),i=e.ref(""),f=null;function l(){const t=o.value.expired_time-e.hooks().unix(),s=e.hooks.duration(t,"seconds"),n=s.hours(),u=s.minutes(),r=s.seconds();i.value=`${n}:${u}:${r}`,t<=0&&clearInterval(f)}const c=()=>{e.index.makePhoneCall({phoneNumber:"15522756996"})},d=()=>{let s={order_id:r};t.CreateWxPay(s).then((t=>{console.log(t),e.wx$1.requestPayment({timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:t.package,signType:"MD5",paySign:t.paySign,success(t){console.log(t),e.wx$1.showToast({icon:"success",title:"支付成功",duration:2e3}),setTimeout((()=>{p()}),2e3)},fail(t){e.wx$1.showToast({icon:"error",title:"支付失败",duration:2e3}),setTimeout((()=>{p()}),2e3),console.log(t)}})}))},p=()=>{let e={order_id:r};t.GetOrderInfo(e).then((e=>{o.value=e,clearInterval(f),f=null,f=setInterval(l,1e3),l()}))},m=()=>{console.log(o),e.index.navigateTo({url:"/pages/mall/info?id="+o.value.goods_id})},_=()=>{e.index.setClipboardData({data:o.value.ship_number+"",success:function(){e.index.showToast({icon:"none",title:"单号复制成功",duration:2e3})},fail:function(e){console.log(e)}})},h=()=>{let s={order_id:r};t.CancelOrder(s).then((t=>{console.log(t),e.index.showToast({icon:"success",duration:2e3,title:"取消成功",success(){setTimeout((()=>{e.wx$1.redirectTo({url:"/pages/user/index"})}),2e3)}})}))},x=()=>{u.value.open()};return e.onUnmounted((()=>{var e;null==(e=u.value)||e.close()})),e.onLoad((e=>{r=e.id,p()})),(t,s)=>e.e({a:e.t(e.unref(n)[e.unref(o).status]),b:1==e.unref(o).status},(e.unref(o).status,{}),{c:2==e.unref(o).status},(e.unref(o).status,{}),{d:3==e.unref(o).status},(e.unref(o).status,{}),{e:4==e.unref(o).status},(e.unref(o).status,{}),{f:e.unref(o).status<0},(e.unref(o).status,{}),{g:0==e.unref(o).status},0==e.unref(o).status?{h:e.t(e.unref(i))}:{},{i:2==e.unref(o).status},2==e.unref(o).status?e.e({j:"ziti"!=e.unref(o).ship_code},"ziti"!=e.unref(o).ship_code?{k:e.o(x)}:{},{l:e.t(e.unref(o).ship_company),m:"ziti"!=e.unref(o).ship_code},"ziti"!=e.unref(o).ship_code?{n:e.t(e.unref(o).ship_number)}:e.e({o:2==e.unref(o).status},(e.unref(o).status,{}),{p:4==e.unref(o).status},(e.unref(o).status,{})),{q:"ziti"!=e.unref(o).ship_code},"ziti"!=e.unref(o).ship_code?{r:e.o(_)}:{}):{},{s:e.t(e.unref(o).name),t:e.t(e.unref(o).phone),v:e.t(e.unref(o).address),w:e.t(e.unref(o).create_time),x:e.t(e.unref(o).out_trade_no),y:"https://www.yuyandental.com/"+e.unref(o).goods_image,z:e.t(e.unref(o).goods_name),A:e.t(e.unref(o).num),B:e.t(e.unref(o).real_price),C:e.o(m),D:0==e.unref(o).status},0==e.unref(o).status?{E:e.o((t=>e.isRef(a)?a.value=!0:a=!0))}:{},{F:1==e.unref(o).status||2==e.unref(o).status||3==e.unref(o).status||4==e.unref(o)},1==e.unref(o).status||2==e.unref(o).status||3==e.unref(o).status||4==e.unref(o)?{G:e.o(c)}:{},{H:0==e.unref(o).status},0==e.unref(o).status?{I:e.t(e.unref(o).real_price),J:e.o(d)}:{},{K:e.unref(a)},e.unref(a)?{L:e.o((t=>e.isRef(a)?a.value=!1:a=!1)),M:e.o(h)}:{},{N:e.t(e.unref(o).ship_company),O:e.t(e.unref(o).ship_number),P:e.t(e.unref(o).ship_state),Q:e.unref(o).express},e.unref(o).express?e.e({R:-1==e.unref(o).express.state},-1==e.unref(o).express.state?{S:e.t(e.unref(o).express.data)}:{T:e.f(e.unref(o).express.data,((t,s,n)=>({a:e.t(t.time),b:e.t(t.context),c:s})))}):{},{U:e.sr(u,"0724ee7d-0",{k:"popup"}),V:e.p({type:"bottom"})})}},n=e._export_sfc(s,[["__scopeId","data-v-0724ee7d"]]);wx.createPage(n);
